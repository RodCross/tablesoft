<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.12.2.final using JasperReports Library version 6.12.2-75c5e90a222ab406e416cbf590a5397028a52de3  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReporteTicket2" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="926d8285-45c8-4db0-8e35-05867a1a5f96">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="ConexionPixies"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="Ticket_id" class="java.lang.Integer"/>
	<parameter name="IMAGEN_REPORTE" class="java.awt.Image"/>
	<parameter name="RUTA_REPORTE" class="java.lang.String">
		<defaultValueExpression><![CDATA[$P{RUTA_REPORTE}]]></defaultValueExpression>
	</parameter>
	<parameter name="RUTA_LISTA_TRANS_TICKET" class="java.lang.String"/>
	<parameter name="RUTA_LISTA_TRANS_EXTERNA" class="java.lang.String"/>
	<parameter name="RUTA_LISTA_CAMBIOS" class="java.lang.String"/>
	<parameter name="RUTA_LISTA_TAREAS" class="java.lang.String"/>
	<parameter name="RUTA_LISTA_COMENTARIOS" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT  
		T.ticket_id,
		T.asunto, 
        T.descripcion, 
        T.fecha_envio, 
        T.fecha_cierre_maximo, 
        T.fecha_cierre,
        CASE WHEN PE.tipo = 'E' THEN CONCAT(PE.nombre, " " ,PE.apellido_paterno, " ",  PE.apellido_materno) END as nombreEmpleado,
        CASE WHEN P.tipo = 'A' THEN CONCAT(P.nombre, " " ,P.apellido_paterno, " ",  P.apellido_materno) END as nombreAgente,
        T.alumno_email,
        E.nombre as nombreEstado, 
        U.nombre as nombreUrgencia, 
        C.nombre as nombreCategoria, 
        B.nombre as nombreBiblioteca, 
        AF.nombre as nombreActivoFijo,
        PRO.razon_social as nombreProveedor, 
        T.retrasado
FROM ticket T
  inner join estado_ticket E on T.estado_id = E.estado_id
  inner join urgencia U on T.urgencia_id = U.urgencia_id
  inner join categoria C on T.categoria_id = C.categoria_id
  inner join biblioteca B on T.biblioteca_id = B.biblioteca_id
  inner join empleado EM on T.empleado_id = EM.empleado_id
  left join agente A on T.agente_id = A.agente_id
  left join persona P on P.codigo = A.codigo 
  left join persona PE on PE.codigo = EM.codigo
  left join activo_fijo AF on T.activo_fijo_id = AF.activo_fijo_id
  left join proveedor PRO on T.proveedor_id = PRO.proveedor_id
  where T.ticket_id =  $P{Ticket_id} 
order by T.ticket_id;]]>
	</queryString>
	<field name="ticket_id" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.label" value="ticket_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="asunto" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="asunto"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="descripcion" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="descripcion"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="fecha_envio" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="fecha_envio"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="fecha_cierre_maximo" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="fecha_cierre_maximo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="fecha_cierre" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="fecha_cierre"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="nombreEmpleado" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreEmpleado"/>
	</field>
	<field name="nombreAgente" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreAgente"/>
	</field>
	<field name="alumno_email" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="alumno_email"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<field name="nombreEstado" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreEstado"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="estado_ticket"/>
	</field>
	<field name="nombreUrgencia" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreUrgencia"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="urgencia"/>
	</field>
	<field name="nombreCategoria" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreCategoria"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="categoria"/>
	</field>
	<field name="nombreBiblioteca" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreBiblioteca"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="biblioteca"/>
	</field>
	<field name="nombreActivoFijo" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreActivoFijo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="activo_fijo"/>
	</field>
	<field name="nombreProveedor" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="nombreProveedor"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="proveedor"/>
	</field>
	<field name="retrasado" class="java.lang.Boolean">
		<property name="com.jaspersoft.studio.field.label" value="retrasado"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ticket"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="96" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
			<frame>
				<reportElement mode="Opaque" x="-20" y="6" width="595" height="90" forecolor="#006699" backcolor="#006699" uuid="af92342a-15d2-4107-b109-b6f4c13f078c"/>
				<staticText>
					<reportElement x="17" y="-4" width="400" height="66" forecolor="#FFFFFF" uuid="471d4385-8949-4885-b09a-ad1a32f6466f"/>
					<box>
						<pen lineColor="#FFFFFF"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="Arial" size="30" isBold="true"/>
					</textElement>
					<text><![CDATA[Reporte del ticket]]></text>
				</staticText>
				<image>
					<reportElement x="500" y="10" width="80" height="73" uuid="50086c1b-f00c-4e61-8214-c590b25a8c7e"/>
					<imageExpression><![CDATA[$P{IMAGEN_REPORTE}]]></imageExpression>
				</image>
				<staticText>
					<reportElement x="17" y="50" width="449" height="29" forecolor="#FFFFFF" uuid="f8f72359-c431-407d-95f5-6d710d3df0d4"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="18" isBold="false"/>
					</textElement>
					<text><![CDATA[Sistema de Bibliotecas]]></text>
				</staticText>
			</frame>
		</band>
	</title>
	<detail>
		<band height="522" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<subreport>
				<reportElement x="-3" y="0" width="560" height="522" uuid="cf093775-76d2-4d3d-b9a9-77d07760329b"/>
				<subreportParameter name="Ticket_id">
					<subreportParameterExpression><![CDATA[$F{ticket_id}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_LISTA_CAMBIOS">
					<subreportParameterExpression><![CDATA[$P{RUTA_LISTA_CAMBIOS}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_LISTA_TAREAS">
					<subreportParameterExpression><![CDATA[$P{RUTA_LISTA_TAREAS}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_LISTA_TRANS_EXTERNA">
					<subreportParameterExpression><![CDATA[$P{RUTA_LISTA_TRANS_EXTERNA}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_LISTA_TRANS_TICKET">
					<subreportParameterExpression><![CDATA[$P{RUTA_LISTA_TRANS_TICKET}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_LISTA_COMENTARIOS">
					<subreportParameterExpression><![CDATA[$P{RUTA_LISTA_COMENTARIOS}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="RUTA_REPORTE">
					<subreportParameterExpression><![CDATA[$P{RUTA_REPORTE}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{RUTA_REPORTE}]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
